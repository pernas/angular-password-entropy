(function(){"use strict";var a={}.hasOwnProperty;angular.module("passwordEntropy",[]).directive("passwordEntropy",["EntropyService",function(b){return{restrict:"E",template:'<div ng-show="password" class="progress">\n  <div class="progress-bar"\n      ng-class=colorBar\n      role="progressbar"\n      aria-valuenow="{{score}}""\n      aria-valuemin="0"\n      aria-valuemax="100"\n      ng-style="{width: score + \'%\'}">\n    {{veredict(score)}}\n  </div>\n</div>',controller:["$scope",function(c){var d;return c.score=0,c.colorBar="progress-bar-danger",d={0:["progress-bar-danger","weak"],25:["progress-bar-warning","regular"],50:["progress-bar-info","normal"],75:["progress-bar-success","strong"]},c.optionsUsed=c.options||d,c.veredict=function(b){var d,e,f,g,h;g=c.optionsUsed;for(h in g)a.call(g,h)&&(f=g[h],b>=h&&(e=f));return c.colorBar=e[0],d=e[1]},c.entropy=b.scorePassword,c.$watch("password",function(a){return c.score=c.entropy(a)})}],scope:{password:"=",options:"="}}}]).directive("minEntropy",["EntropyService",function(a){return{require:"ngModel",link:function(b,c,d,e){var f;f=function(b){var c,f;return c=parseFloat(d.minEntropy),f=a.scorePassword(b),f>c?e.$setValidity("minEntropy",!0):e.$setValidity("minEntropy",!1),b},e.$parsers.unshift(f)}}}]).factory("Maybe",function(){var a,b,c,d;return c=function(a){switch(this){case b:return b;default:return a(this.val)}},d=function(a){return Object.freeze({val:null!=a?a:null,bind:c})},b=d(null),a=function(a){return null!=a?d(a):b},{Nothing:b,Just:a}}).factory("EntropyService",["Maybe",function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;return o=0,l="",c=a.Nothing,b=a.Just,m=[[.25,/^\d+$/],[.25,/^[a-z]+\d$/],[.25,/^[A-Z]+\d$/],[.5,/^[a-zA-Z]+\d$/],[.5,/^[a-z]+\d+$/],[.25,/^[a-z]+$/],[.25,/^[A-Z]+$/],[.25,/^[A-Z][a-z]+$/],[.25,/^[A-Z][a-z]+\d$/],[.5,/^[A-Z][a-z]+\d+$/],[.25,/^[a-z]+[._!\- @*#]$/],[.25,/^[A-Z]+[._!\- @*#]$/],[.5,/^[a-zA-Z]+[._!\- @*#]$/],[.25,/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]+$/],[1,/^.*$/]],Math.log2=function(a){return Math.log(a)/Math.LN2},g=function(a){return/[0-9]/.test(a)},h=function(a){return/[a-z]/.test(a)},j=function(a){return/[A-Z]/.test(a)},i=function(a){return/[-!$%^&*()_+|~=`{}\[\]:";'<>?@,.\/]/.test(a)},d=function(a){var b,c,d,e;return e=[[10,g(a)],[26,h(a)],[26,j(a)],[31,i(a)]],c=function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a++)d=e[a],d[1]&&c.push(d[0]);return c}(),b=c.reduce(function(a,b){return a+b},0),0===b?1:b},k=function(a){return""===a||null==a||"string"!=typeof a?c:b(a)},e=function(a){return k(a).bind(function(a){return b(Math.log2(Math.pow(d(a),a.length)))})},n=function(a,b){var c;return Math.min.apply(this,function(){var d,e,f;for(f=[],d=0,e=b.length;e>d;d++)c=b[d],c[1].test(a)&&f.push(c[0]);return f}())},f=function(a,c){return e(a).bind(function(d){return b(d*n(a,c))})},p=function(a){var b;switch(b=f(a,m)){case c:return 0;default:return b.val>100?100:b.val}},{scorePassword:function(a){return a!==l?(l=a,o=p(a)):o}}}])}).call(this);