(function(){"use strict";var a={}.hasOwnProperty;angular.module("passwordEntropy",[]).directive("passwordEntropy",["EntropyService",function(b){return{restrict:"E",template:'<div ng-show="password" class="progress">\n  <div class="progress-bar"\n      ng-class=colorBar\n      role="progressbar"\n      aria-valuenow="{{score}}""\n      aria-valuemin="0"\n      aria-valuemax="100"\n      ng-style="{width: score + \'%\'}">\n    {{veredict(score)}}\n  </div>\n</div>',controller:["$scope",function(c){var d;return c.score=0,c.colorBar="progress-bar-danger",d={0:["progress-bar-danger","weak"],25:["progress-bar-warning","regular"],50:["progress-bar-info","normal"],75:["progress-bar-success","strong"]},c.optionsUsed=c.options||d,c.veredict=function(b){var d,e,f,g,h;g=c.optionsUsed;for(h in g)a.call(g,h)&&(f=g[h],b>=h&&(e=f));return c.colorBar=e[0],d=e[1]},c.entropy=b.scorePassword,c.$watch("password",function(a){return c.score=c.entropy(a)})}],scope:{password:"=",options:"="}}}]).directive("minEntropy",["EntropyService",function(a){return{require:"ngModel",link:function(b,c,d,e){var f;f=function(b){var c,f;return c=parseFloat(d.minEntropy),f=a.scorePassword(b),f>c?e.$setValidity("minEntropy",!0):e.$setValidity("minEntropy",!1),b},e.$parsers.unshift(f)}}}]).factory("Maybe",function(){var a,b,c,d;return c=function(a){switch(this){case b:return b;default:return a(this.val)}},d=function(a){return Object.freeze({val:null!=a?a:null,bind:c})},b=d(null),a=function(a){return null!=a?d(a):b},{Nothing:b,Just:a}}).factory("EntropyService",["Maybe",function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return p=0,m="",c=a.Nothing,b=a.Just,n=[[.25,/^[\d\s]+$/],[.25,/^[a-z\s]+\d$/],[.25,/^[A-Z\s]+\d$/],[.5,/^[a-zA-Z\s]+\d$/],[.5,/^[a-z\s]+\d+$/],[.25,/^[a-z\s]+$/],[.25,/^[A-Z\s]+$/],[.25,/^[A-Z][a-z\s]+$/],[.25,/^[A-Z][a-z\s]+\d$/],[.5,/^[A-Z][a-z\s]+\d+$/],[.25,/^[a-z\s]+[._!\- @*#]$/],[.25,/^[A-Z\s]+[._!\- @*#]$/],[.5,/^[a-zA-Z\s]+[._!\- @*#]$/],[.25,/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]+$/],[1,/^.*$/]],Math.log2=function(a){return Math.log(a)/Math.LN2},h=function(a){return/[0-9]/.test(a)},i=function(a){return/[a-z]/.test(a)},k=function(a){return/[A-Z]/.test(a)},j=function(a){return/[^0-9a-zA-z]/.test(a)},e=function(a){var b;return b=Math.max.apply(Math,a.split("").map(function(a){return a.charCodeAt(0)})),b+256-b%256},d=function(a){var b,c,d,f;return f=[[10,h(a)],[26,i(a)],[26,k(a)]],c=function(){var a,b,c;for(c=[],a=0,b=f.length;b>a;a++)d=f[a],d[1]&&c.push(d[0]);return c}(),b=j(a)?e(a):c.reduce(function(a,b){return a+b},0),0===b?1:b},l=function(a){return""===a||null==a||"string"!=typeof a?c:b(a)},f=function(a){return l(a).bind(function(a){return b(Math.log2(Math.pow(d(a),a.length)))})},o=function(a,b){var c;return Math.min.apply(this,function(){var d,e,f;for(f=[],d=0,e=b.length;e>d;d++)c=b[d],c[1].test(a)&&f.push(c[0]);return f}())},g=function(a,c){return f(a).bind(function(d){return b(d*o(a,c))})},q=function(a){var b;switch(b=g(a,n)){case c:return 0;default:return b.val>100?100:b.val}},{scorePassword:function(a){return a!==m?(m=a,p=q(a)):p}}}])}).call(this);